var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i);
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
    }
};

var widthClient = document.body.clientWidth;
var buttonColor = "";
if(window.location.href.indexOf("dormeo") > -1) {
    buttonColor = "background-color: #0C285F; border: 1px solid #0C285F;color: #FFF;text-decoration: none;"
}
if(window.location.href.indexOf("delimano") > -1) {
    buttonColor = "background-color: #f57d22; border: 1px solid #f57d22;color: #FFF;text-decoration: none;"
}
if(window.location.href.indexOf("walkmaxx") > -1) {
    buttonColor = "background-color: #d22026; border: 1px solid #d22026;color: #FFF;text-decoration: none;"
}
if(window.location.href.indexOf("wellneo") > -1) {
    buttonColor = "background-color: #a6ce39; border: 1px solid #a6ce39;color: #FFF;text-decoration: none;"
}
if(window.location.href.indexOf("top") > -1 && window.location.href.indexOf("shop") > -1) {
    buttonColor = "background-color: #ed1c24; border: 1px solid #ed1c24;color: #FFF;text-decoration: none;"
}
if(window.location.href.indexOf("mango") > -1) {
    buttonColor = "background-color: #221060; border: 1px solid #221060;color: #FFF;text-decoration: none;"
}
if(window.location.href.indexOf("rovus.pl") > -1 || window.location.href.indexOf("rovus.ba") > -1) {
    buttonColor = "background-color: #bed62f; border: 1px solid #bed62f;color: #FFF;text-decoration: none;"
}

function splitDigital(n, delimiter) {
    if(delimiter === "undefined") {
        delimiter = " ";
    }
    var d = '$1' + delimiter;
    return n.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, d);
}
window.getCookie = function(name) {
  match = document.cookie.match(new RegExp(name + '=([^;]+)'));
  if (match) return match[1];
}

if (window.location.href.indexOf("?softcubequery=true") > -1) {
    console.log("softcubequery demo")
    function setCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "")  + expires + "; path=/";
    }
    setCookie('softcubeTestQuery','true',7);
}


function _html_(howerWidth, width, recommend, i,recommendText) {
    var htmlBlocks = [];
    var num = new Number(recommend.price);
    var price = num.toFixed(recommendText.Number);
    var numold = new Number(recommend.tags_oldprice);
    var oldprice = numold.toFixed(recommendText.Number);
    var numreduce = new Number(recommend.tags_reduced_price);
    var numclub = new Number(recommend.tags_club5_price);
    var club = numclub.toFixed(recommendText.Number);
    var displaygift = "display:none;";
    var displaydelivery = "display:none;";
    var displayprice = "";
    var displayclub = "display:none;";
    var displayoldprice = "display:none;";
    var displaylabel = "display:none;";
    var displaylabelTop = "top: 0";
    var item = "";
    var right = "";
    var left = "left: 116px;";
    if(window.location.href.indexOf("onepage/success/") > -1){
        left = "left: 116px;";
    }
    var position = "position: relative;";
    var overflow = "overflow: hidden;";
    var height = "/*height: 185px;*/";
    var center = "";
    var reduced_price = numreduce.toFixed(recommendText.Number);
    if(recommend.tags_giftrule === "true") {
        displaygift = "display:block;";
    }
    if(recommend.tags_giftdelivery === "true") {
        displaydelivery = "display:block;";
    }
    if(recommend.price.length > 3) {
        //price = splitDigital(recommend.price);
    }

    if(recommend.tags_reduced_price.length > 1 && parseInt(recommend.tags_oldprice) > parseInt(recommend.tags_reduced_price)) {
        displayoldprice = "display:block;";
        displayprice = "display:none;";
        //oldprice = price;
    }
    if(recommend.tags_club5_price.length > 1) {
        displayclub = "display:inline-block;";
        displayprice = "display:block;";
    }
    if(recommend.tags_discount.length > 1) {
        displaylabel = "display:block;";
        displaylabelTop = "top: 0;";
    }
    if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
        displayprice = "display:none;";
    }

    htmlBlocks.push('<div class="sc-hover" style="'+ howerWidth + '"><div class="owl-item animate_item" style="' + width + ' margin:0 auto;border: 1px solid #dbdbdb; background-color: #fff;">' +
    '<div class="item" style="text-align: center;">'+
    '<div class="new-label new-top-right" style=" ' + displaylabel + ' width: 60px;float: right;z-index: 1000;margin-left: -60px;  margin-top: 4px;position: relative; top: 0;font-size: 15px;">'+
        '<span>- ' + recommend.tags_discount + '%</span>'+
    '</div>'+
        '<div class="li-content" style="  position: relative;z-index: 200;' + displaylabelTop + '">'+
            '<div class="list-image-box" style="min-height: 155px;">'+
                '<div class="hover-state "></div>'+
                '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image" style="overflow: hidden;z-index: 100;">'+
                    '<div class="blocksc">'+
                        '<img src="' + recommend.imageurl + '" alt="' + recommend.name + '">'+
                    '</div>'+
                    '<div class="hover-image"></div>'+
                '</a>'+
            '</div>'+
            '<div class="list-image-box" style="border-bottom: 1px solid #dbdbdb; margin: 0 20px;"></div>'+
            '<a href="' + recommend.url + '" title="' + recommend.name + '" class="widget-product-link" style="text-decoration: none;">'+
                '<div class="product-info" style="margin:10px 0 0 0;' + height+ '">'+
                    '<div class="product-info-inner" style=" padding: 0 10px;">'+
                        '<h2 class="product-name js-gtm-data" style="word-wrap: break-word;height: 71px;border-bottom:0;font-size: 16px;text-align: center;' + overflow + '">' + recommend.name + '</h2>'+
                        '<div class="gift-icon-wrapper" style="height: 28px;' + recommendText.freeGifts + '">'+
                            '<div style="' + displaygift + ' padding: 5px 0; color: #41aeef; font-family: \'Roboto Condensed\', arial, sans-serif; text-transform: uppercase; font-size: 14px; font-weight: bold;" class="gift-icon" id="">'+
                                '<i class="fa fa-gift" aria-hidden="true" style="line-height: 12px;"></i>'+
                                '<span class="copy">' + recommendText.textGift + '</span>'+
                            '</div>'+
                        '</div>'+
                        '<div class="free-delivery-wrapper" style="height: 50px;' + recommendText.freeDeliveris + '">'+
                            '<div style="' + displaydelivery + '" class="free-delivery">'+
                                '<span class="icon" style="padding-top: 6px;">&nbsp;</span>'+
                                '<span class="copy">' + recommendText.textDelivery + '</span>'+
                            '</div>'+
                        '</div>'+
                        '<div class="price-box" style="width: 100%; display: table;height: 36px;">'+
                            '<span style="' + displayprice + '" class="regular-price" id="" style="  line-height: 20px;font-size: 13px;display: block;clear: both;  text-align: center;">'+
                                '<span class="price-label price-label-before">' + recommendText.textPrice + '&nbsp;</span>'+
                                '<span class="price" style="font-size: 14px; display: inline-block;  text-align: center;"> ' + splitDigital(price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
                                '<span class="price-label price-label-after"></span>'+
                            '</span>'+
                            '<p style="' + displayoldprice + 'font-size: 12px;line-height: 1.5em;" class="old-price">'+
                                '<span class="price-label">'+recommendText.textOldprice+'&nbsp;</span>'+
                                '<span class="price" id="" style="white-space: nowrap;">' + splitDigital(oldprice.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + ' </span>'+
                            '</p>'+
                            '<p style="' + displayoldprice + 'font-size: 12px;line-height: 1.5em;" class="special-price">'+
                                '<span class="price-label">'+recommendText.textReducedprice+'&nbsp;</span>'+
                                '<span class="price" id="" style="white-space: nowrap;">' + splitDigital(reduced_price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + ' </span>'+
                            '</p>'+
                        '</div>'+
                    '</div>'+
                    '<div class="club-five" style="height: 20px;' + recommendText.clubPrices + '">'+
                        '<span class="club5-price" style="' + displayclub + ' font-size: 12px;  box-sizing: border-box; margin: 0; padding: 0;  text-align: center; font-family: Arial, sans-serif;">' + splitDigital(club.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '&nbsp;' + recommendText.textClub + '<span class="icon"></span></span>'+
                    '</div>'+
                '</div>'+
            '</a>'+
        '</div>'+
        '<div class="quickview-button" style="  margin-top: 10px;'+center+'">'+
            '<a title="'+recommendText.textButton+'" class="view-prod-sc" href="' + recommend.url + '" style="' + buttonColor +' ">'+recommendText.textButton+'</a>'+
        '</div>'+
    '</div>'+
'</div></div>');
    return htmlBlocks.join('');
}
function _htmlMobile_(width, recommend, i,recommendText) {
    var htmlBlocks = [];
    var num = new Number(recommend.price);
    var price = num.toFixed(recommendText.Number);
    var numold = new Number(recommend.tags_oldprice);
    var oldprice = numold.toFixed(recommendText.Number);
    var numreduce = new Number(recommend.tags_reduced_price);
    var numclub = new Number(recommend.tags_club5_price);
    var club = numclub.toFixed(recommendText.Number);
    var displaygift = "display:none;";
    var displaydelivery = "display:none;";
    var displayprice = "";
    var displayclub = "display:none;";
    var displayoldprice = "display:none;";
    var displaylabel = "display:none;";
    var displaylabelTop = "top: 0";
    var item;
    var right = "";
    var left = "left: 206px;";
    var position = "position: relative;";
    var overflow = "";
    var mobilehide = "";
    var height = "height: 185px;";
    var center = "";
    var reduced_price = "";
    if(recommend.tags_giftrule === "true") {
        displaygift = "display:block;";
    }
    if(recommend.tags_giftdelivery === "true") {
        displaydelivery = "display:block;";
    }
    if(recommend.price.length > 3) {
        //price = splitDigital(recommend.price);
    }

    if(recommend.tags_reduced_price.length > 1) {
        reduced_price = numreduce.toFixed(recommendText.Number);
        displayoldprice = "display:block;";
        displayprice = "display:none;";
    }
    if(recommend.tags_club5_price.length > 1) {
        displayclub = "display:inline-block;";
        displayprice = "display:block;";
    }
    if(recommend.tags_discount.length > 1) {
        displaylabel = "display:block;";
        displaylabelTop = "top: -26px;";
        //displayprice = "display:none;";
    }
    if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
        displayprice = "display:none;";
    }
    widthClient = document.body.clientWidth;
    htmlBlocks.push('<li class="item animate_item" style="width:' + width + 'px;float:left;margin: 0 auto; background-color: #fff;border: 0; border-radius: 0;height: max-content; margin-bottom:10px">'+
    '<div class="list-image-box" style="width: 90%;padding-bottom: 10px;min-height:90px;">'+
        '<div class="new-label new-top-right" style="' + displaylabel + ';right: -25px;font-size: 15px;">'+
            '<span>- ' + recommend.tags_discount + '% </span>'+
        '</div>'+
        '<div class="hover-state ">'+
            '<div class="quickview-button">'+
                '<a class="quickview-link" title="' + recommend.name + '" href="' + recommend.url + '" rel="nofollow" style="display:none">' + recommendText.textButton + '</a>'+
            '</div>'+
        '</div>'+
        '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image" style="text-decoration: none;">'+
            '<img src="' + recommend.imageurl + '" alt="' + recommend.name + '" class="softimg">'+
            '<div class="hover-image" style="border-bottom: 1px solid #dbdbdb; margin: 0 20px;"></div>'+
        '</a>'+
    '</div>'+
    '<div class="product-info-inner" style="width: 90%;padding-top: 10px;border-top: 0px solid #dbdbdb;">'+
        '<a href="' + recommend.url + '" style="text-decoration: none;">'+
            '<h3 class="product-name js-gtm-data" data-engname="' + recommend.name + '" style="word-wrap: break-word;height: 87px;font-size: 1.1em;overflow: hidden;">' + recommend.name + '</h3>'+
            '<div class="gift-icon-wrapper" style="height: 28px;">'+
                                '<div style="' + displaygift + ' /*min-height: 28px;*/ padding: 5px 0; color: #41aeef; font-family: \'Roboto Condensed\', arial, sans-serif; text-transform: uppercase; font-size: 14px; font-weight: bold;" class="gift-icon" id="">'+
                                    '<i class="fa fa-gift" aria-hidden="true" style="line-height: 12px;"></i>'+
                                    '<span class="copy">' + recommendText.textGift + '</span>'+
                                '</div>'+
                            '</div>'+
            '<div class="price-container" style="height: 84px;">'+
                '<div class="price-box">'+
                    '<span class="regular-price" style="' + displayprice + '">'+
                        '<span class="price-label price-label-before">'+recommendText.textPrice+'&nbsp;</span>'+ 
                        '<span class="price">' + splitDigital(price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span><span class="price-label price-label-after"></span>'+
                    '</span>'+
                    '<p class="old-price" style="' + displayoldprice + '">'+
                        '<span class="price-label">' + recommendText.textOldprice + '&nbsp;</span>'+
                        '<span class="price" style="text-decoration: line-through;">' + splitDigital(oldprice.replace(".", ","),recommendText.delimiter)+ '&nbsp;' + recommendText.curency + ' </span>'+
                    '</p>'+
                    '<br>'+
                    '<p class="special-price" style="' + displayoldprice + '">'+
                        '<span class="price-label">' + recommendText.textReducedprice + '&nbsp;</span>'+
                        '<span class="price" style="text-decoration: none;">' + splitDigital(reduced_price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + ' </span>'+
                    '</p>'+
                    '<div class="club-five" style="height: 21px;font-size:13px;' + displayclub + '">'+
                        '<span class="club5-price">'+ splitDigital(club.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + ' </span>'+
                        '<span class="club5-label">' + recommendText.textClub + '<span class="icon"></span>'+
                        '</span>'+
                    '</div>'+
                '</div>'+
            '</div>'+
            '<div class="club-five">'+
            '</div>'+
        '</a>'+
    '</div>'+
    '<div class="actions" style="width: 90%;">'+
        '<a title="' + recommendText.textButton + '" class="view-prod" href="' + recommend.url + '" style="font-size: 14px;">' + recommendText.textButton + '</a>'+
    '</div>'+
'</li>');
    return htmlBlocks.join('');
}
function _htmlMobileCheck_(width, recommend, i,recommendText) {
    var htmlBlocks = [];
    var num = new Number(recommend.price);
    var price = num.toFixed(recommendText.Number);
    var numold = new Number(recommend.tags_oldprice);
    var oldprice = numold.toFixed(recommendText.Number);
    var numreduce = new Number(recommend.tags_reduced_price);
    var numclub = new Number(recommend.tags_club5_price);
    var club = numclub.toFixed(recommendText.Number);
    var displaygift = "display:none;";
    var displaydelivery = "display:none;";
    var displayprice = "";
    var displayclub = "display:none;";
    var displayoldprice = "display:none;";
    var displaylabel = "display:none;";
    var displaylabelTop = "top: 0";
    var item;
    var right = "";
    var left = "left: 206px;";
    var position = "position: relative;";
    var overflow = "";
    var mobilehide = "";
    var height = "height: 185px;";
    var center = "";
    var reduced_price = "";
    if(recommend.tags_giftrule === "true") {
        displaygift = "display:block;";
    }
    if(recommend.tags_giftdelivery === "true") {
        displaydelivery = "display:block;";
    }
    if(recommend.price.length > 3) {
        //price = splitDigital(recommend.price);
    }

    if(recommend.tags_reduced_price.length > 1) {
        reduced_price = numreduce.toFixed(recommendText.Number);
        displayoldprice = "display:block;";
        displayprice = "display:none;";
    }
    if(recommend.tags_club5_price.length > 1) {
        displayclub = "display:inline-block;";
        displayprice = "display:block;";
    }
    if(recommend.tags_discount.length > 1) {
        displaylabel = "display:block;";
        displaylabelTop = "top: -26px;";
    }
    if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
        displayprice = "display:none;";
    }
    widthClient = document.body.clientWidth;
    htmlBlocks.push('<li class="item animate_item" style="width:'+ parseInt(widthClient*0.42)+'px;float:left;margin: 0 10px 20px 0;  border-radius: 0;height: 100%;   border: 1px solid #dbdbdb; padding: 15px; list-style: none;">'+
    '<div class="list-image-box">'+
        '<div class="new-label new-top-right" style="font-size: 15px;'+displaylabel+'">'+
            '<span>- ' + recommend.tags_discount + '% </span>'+
        '</div>'+
        '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image" style="text-decoration: none;">'+
            '<img src="' + recommend.imageurl + '" alt="' + recommend.name + '" class="softimg">'+
            '<div class="hover-image"></div>'+
        '</a>'+
    '</div>'+
    '<div class="product-info-inner">'+
        '<a href="' + recommend.url + '" style="text-decoration: none;">'+
            '<h3 class="product-name js-gtm-data" data-engname="' + recommend.name + '" style="height: 87px;font-size: 1.1em;overflow: hidden;">' + recommend.name + '</h3>'+
            '<div class="price-container" style="height: 84px;">'+
                '<div class="price-box" style="  margin: 0 auto; display: table;">'+
                    '<span class="regular-price" style="' + displayprice + '">'+
                        '<span class="price-label price-label-before">'+ recommendText.textPrice +'&nbsp;</span>'+ '<span class="price">' + price.replace(".", ",") + '&nbsp;'+ recommendText.curency +'</span><span class="price-label price-label-after"></span>'+
                    '</span>'+
                    '<p class="old-price" style="' + displayoldprice + '">'+
                        '<span class="price-label">'+ recommendText.textOldprice +'&nbsp;</span>'+
                        '<span class="price" style="    text-decoration: line-through;">' + splitDigital(oldprice.replace(".", ","),recommendText.delimiter)+ '&nbsp;'+recommendText.curency+' </span>'+
                    '</p>'+
                    '<br>'+
                    '<p class="special-price" style="' + displayoldprice + '">'+
                        '<span class="price-label">'+ recommendText.textReducedprice +'&nbsp;</span>'+
                        '<span class="price">' + splitDigital(reduced_price.replace(".", ","),recommendText.delimiter) + '&nbsp;'+recommendText.curency+' </span>'+
                    '</p>'+
                    '<div class="club-five" style="height: 21px;' + displayclub + '">'+
                        '<span class="club5-price">'+ splitDigital(club.replace(".", ","),recommendText.delimiter) + '&nbsp;'+recommendText.curency+' </span>'+
                        '<span class="club5-label">'+ recommendText.textClub +'<span class="icon"></span>'+
                        '</span>'+
                    '</div>'+
                '</div>'+
            '</div>'+
            '<div class="club-five">'+
            '</div>'+
        '</a>'+
    '</div>'+
    '<div class="actions" style="  margin-bottom: 0px;text-align: center;box-sizing: border-box; margin: 0; padding: 0;font-size: 14px; line-height: 1.5em;  bottom: 15px;">'+
        '<a title="'+ recommendText.textButton +'" class="view-prod" href="' + recommend.url + '"style="font-size: 14px;  ' + buttonColor +'    display: inline-block; margin: 8px 0;  padding: 5px 10px;border-radius: 5px;">'+ recommendText.textButton +'</a>'+
    '</div>'+
'</li>');
    return htmlBlocks.join('');
}


function _height (){
    var maxHeight = [];
    var htmlItems = document.querySelectorAll("#softcubeHistory .owl-item .product-info");
    for (var i = htmlItems.length - 1; i >= 0; i--) {
        maxHeight.push(htmlItems[i].offsetHeight);
    }
    var heightItem = Math.max.apply(Math,maxHeight);
    var top = document.querySelectorAll("#softcubeHistory .li-content");
    for (var r = htmlItems.length - 1; r >= 0; r--) {
        if(top[r].getAttribute("style").indexOf("-26px") > -1) {
            htmlItems[r].style.height = heightItem -26 + "px";
        } else {
            htmlItems[r].style.height = heightItem + "px";
        }
    }
    //document.getElementById('softcubeholder').style.height = heightItem + "px";
    var heightItemsDiv = document.getElementsByClassName("owl-item animate_item")[0].offsetHeight;
}

/* animate block*/
function _animate_item(item_width) {
    function second_passed() {
        var animate_item = document.getElementsByClassName('animate_item');
        var count_product = document.getElementsByClassName("animate_item").length; 
        var leftprev = 0;
        var prev = document.getElementById('softcubeprev');
        var next = document.getElementById('softcubenext');
        var inner = document.getElementById('softcubeinner');
        var len = document.getElementsByClassName("animate_item");
        if(len.length > 0) {
            len[0].offsetWidth;
        }
        else {
            len = 0;
        }
        inner.style.setProperty("left", "0px", "important");
        var left = parseInt(inner.style.left);
        var width = "";
    
        var inner_width = len * count_product - len * 5;
        next.addEventListener('click', function (e) {
            width = inner.offsetWidth * count_product;
            inner.style.setProperty("width", width + 'px');
            if (-left < inner_width - len) {
                scroll = item_width;
                if (left > (left - scroll)) {
                    left = left - item_width;
                    scroll--;
                    inner.style.setProperty("left", left + 'px', "important");
                    //jQuery('#softcubeinner').animate({ left: left }, 'slow');
                    leftprev = left - 1;
                }
            }
        });
    
        prev.addEventListener('click', function () {
            if (-leftprev >= -left && -left > 0) {
                scroll = -item_width;
                if (-left > (scroll - left)) {
                    left = left + item_width;
                    scroll--;
                    inner.style.setProperty("left", left + 'px', "important");
                    //jQuery('#softcubeinner').animate({ left: left }, 'slow');
                }
            }
        });
    }
    setTimeout(second_passed, 2000);
}
function second_passed_mob() {
    var h = 375;
    animTimer = window.setInterval(function() {
        var oBlock = document.getElementsByClassName('item animate_item');
        var softimg = document.getElementsByClassName('softimg');
        if(oBlock.length > 0){
            var h1 = oBlock[0].offsetHeight;
            var img = softimg[0].offsetHeight;
            widthClient = document.body.clientWidth;
            if(img > 70){
                if(isMobile.any() && widthClient < 1000) {
                    
                    if( document.getElementById("softcubeholder")) {
                        document.getElementById("softcubeholder").style.height = h1 + 20 + "px";
                    }
                }
                window.clearInterval(animTimer);
                _maxHeightMobile();
            }
        }
    },500);
}
setTimeout(second_passed_mob, 2000);
function _maxHeightMobile (){
    var maxHeight = [];
    var htmlItems = document.querySelectorAll("#softcube .price-container");
    for (var i = htmlItems.length - 1; i >= 0; i--) {
        maxHeight.push(htmlItems[i].offsetHeight);
    }
    var heightItem = Math.max.apply(Math,maxHeight);
    for (var r = htmlItems.length - 1; r >= 0; r--) {
         htmlItems[r].style.height = heightItem + "px";
    }
}

_Timer = window.setInterval(function() {
    var num = 5;
    if(window.location.href.indexOf("onepage/success") > -1) {
        num = 3;
    }
    if(document.querySelectorAll("#softcubeHistory .owl-item .product-info").length > num){
        window.clearInterval(_Timer);
        var scItems = document.getElementsByClassName("sc-hover");
        if (widthClient < 1200 && widthClient > 900) {
            if(scItems.length > 0) {
                if(scItems.length === 6) scItems[5].style.display = "none";
                if(scItems.length > 5) scItems[4].style.display = "block";
            }
        } else if (widthClient <= 900 && widthClient > 600) {
            if(scItems.length > 0) {
                if(scItems.length === 6) scItems[5].style.display = "none";
                if(scItems.length > 5) scItems[4].style.display = "none";
            }
            
        } else if (widthClient > 1200) {
            if(scItems.length > 0) {
                if(scItems.length === 6) scItems[5].style.display = "";
                if(scItems.length > 5) scItems[4].style.display = "";
            }
            
        }
        if(window.location.href.indexOf("onepage/success") > -1) {
            if (widthClient < 1200 && widthClient > 900) {
                if(scItems.length > 0) {
                    if(scItems.length === 4) scItems[3].style.display = "none";
                    if(scItems.length > 3) scItems[2].style.display = "block";
                }
            } else if (widthClient <= 900 && widthClient > 600) {
                if(scItems.length > 0) {
                    if(scItems.length === 4) scItems[3].style.display = "none";
                    if(scItems.length > 3) scItems[2].style.display = "none";
                }
                
            } else if (widthClient > 1200) {
                if(scItems.length > 0) {
                    if(scItems.length === 4) scItems[3].style.display = "";
                    if(scItems.length > 3) scItems[2].style.display = "";
                }
                
            }
        }
        if (window.location.href !== "http://www.top-shop.ro/"){
            _height();
        }
    }
},500);

function resize() { 
    var isMobile = {
        Android: function() {
            return navigator.userAgent.match(/Android/i);
        },
        BlackBerry: function() {
            return navigator.userAgent.match(/BlackBerry/i);
        },
        iOS: function() {
            return navigator.userAgent.match(/iPhone|iPad|iPod/i);
        },
        Opera: function() {
            return navigator.userAgent.match(/Opera Mini/i);
        },
        Windows: function() {
            return navigator.userAgent.match(/IEMobile/i);
        },
        any: function() {
            return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
        }
    };
    var widthClient = document.body.clientWidth;
    var scItems = document.getElementsByClassName("sc-hover");
    var scAnimateItems = document.getElementsByClassName("item animate_item");
    if(isMobile.any() && widthClient < 479) {
        if(scAnimateItems.length > 0) {
            for (var i = scAnimateItems.length - 1; i >= 0; i--) {
                scAnimateItems[i].style.width = parseInt(widthClient * 0.4) + "px";
            }
            document.getElementById("softcubeholder").style.width = widthClient * 0.8 + "px";
            document.getElementById("softcubeholder").style.height = "";
            var heightItemsDiv = scAnimateItems[0].offsetHeight;
            document.getElementById("softcubeholder").style.height = heightItemsDiv + "px";
            _animate_item(parseInt(widthClient * 0.8));
            if(document.querySelectorAll("#softcubeTest").length > 0) {
                document.querySelectorAll(".animate_holder")[0].style.display="none";
                document.querySelectorAll(".softcubeprev")[0].style.display="none";
                document.querySelectorAll(".softcubenext")[0].style.display="none";
                document.querySelectorAll("#softcubeTest")[0].style.display="block";
                document.querySelectorAll("#softcubeTest")[0].style.opacity="1";
            }
        }
    } else if(isMobile.any() && widthClient < 640 && widthClient >= 479) {
        if(scAnimateItems.length > 0) {
            for (var i = scAnimateItems.length - 1; i >= 0; i--) {
                scAnimateItems[i].style.width = parseInt(widthClient * 0.4) + "px";
            }
            document.getElementById("softcubeholder").style.width = widthClient * 0.8 + "px";
            _animate_item(parseInt(widthClient * 0.4));
            document.querySelectorAll(".animate_holder")[0].style.display="block";
            document.querySelectorAll(".softcubeprev")[0].style.display="block";
            document.querySelectorAll(".softcubenext")[0].style.display="block";
            document.querySelectorAll("#softcubeTest")[0].style.display="none";
            document.querySelectorAll("#softcubeTest")[0].style.opacity="1";
            var heightItemsDiv = scAnimateItems[0].offsetHeight;
            document.getElementById("softcubeholder").style.height = heightItemsDiv + "px";
        }
    } else if(isMobile.any() && widthClient < 960 && widthClient >= 640) {
        if(scAnimateItems.length > 0) {
            for (var i = scAnimateItems.length - 1; i >= 0; i--) {
                scAnimateItems[i].style.width = parseInt(widthClient * 0.26) + "px";
            }
            document.getElementById("softcubeholder").style.width = widthClient * 0.78 + "px";
            document.getElementById("softcubeholder").style.height = "";
            var heightItemsDiv = scAnimateItems[0].offsetHeight;
            document.getElementById("softcubeholder").style.height = heightItemsDiv + "px";
            _animate_item(parseInt(widthClient * 0.26));
            document.querySelectorAll(".animate_holder")[0].style.display="block";
            document.querySelectorAll(".softcubeprev")[0].style.display="block";
            document.querySelectorAll(".softcubenext")[0].style.display="block";
            document.querySelectorAll("#softcubeTest")[0].style.display="none";
            document.querySelectorAll("#softcubeTest")[0].style.opacity="1";
            var heightItemsDiv = scAnimateItems[0].offsetHeight;
            document.getElementById("softcubeholder").style.height = heightItemsDiv + "px";
        }
    } else if(isMobile.any() && widthClient < 1200 && widthClient >= 960) {
        if(scAnimateItems.length > 0) {
            for (var i = scAnimateItems.length - 1; i >= 0; i--) {
                scAnimateItems[i].style.width = parseInt(widthClient * 0.18) + "px";
            }
            document.getElementById("softcubeholder").style.width = widthClient * 0.72 + "px";
            _animate_item(parseInt(widthClient * 0.18));
            document.querySelectorAll(".animate_holder")[0].style.display="block";
            document.querySelectorAll(".softcubeprev")[0].style.display="block";
            document.querySelectorAll(".softcubenext")[0].style.display="block";
            document.querySelectorAll("#softcubeTest")[0].style.display="none";
            document.querySelectorAll("#softcubeTest")[0].style.opacity="1";
        }
    } else if (widthClient < 1200 && widthClient > 900 && window.location.href.indexOf("success") === -1) {
        if(scItems.length > 0) {
            if(scItems.length === 6) scItems[5].style.display = "none";
            if(scItems.length > 5) scItems[4].style.display = "block";
            for (var i = scItems.length - 1; i >= 0; i--) {
                scItems[i].style.width = "20%";
            }
        }
    } else if (widthClient <= 900 && widthClient > 600 && window.location.href.indexOf("success") === -1) {
        if(scItems.length > 0) {
            if(scItems.length === 6) scItems[5].style.display = "none";
            if(scItems.length > 5) scItems[4].style.display = "none";
            for (var i = scItems.length - 1; i >= 0; i--) {
                scItems[i].style.width = "25%";
            }
        }
        
    } else if (widthClient > 1200 && window.location.href.indexOf("success") === -1) {
        if(scItems.length > 0) {
            if(scItems.length === 6) scItems[5].style.display = "";
            if(scItems.length > 5) scItems[4].style.display = "";
            for (var i = scItems.length - 1; i >= 0; i--) {
                scItems[i].style.width = "16.66%";
            }
        }
        
    } else if (widthClient < 1200 && widthClient > 900 && window.location.href.indexOf("success") > -1) {
        if(scItems.length > 0) {
            if(scItems.length === 4) scItems[3].style.display = "none";
            if(scItems.length > 3) scItems[2].style.display = "block";
            for (var i = scItems.length - 1; i >= 0; i--) {
                scItems[i].style.width = "33%";
            }
        }
    } else if (widthClient <= 900 && widthClient > 600 && window.location.href.indexOf("success") > -1) {
        if(scItems.length > 0) {
            if(scItems.length === 4) scItems[3].style.display = "none";
            if(scItems.length > 3) scItems[2].style.display = "none";
            for (var i = scItems.length - 1; i >= 0; i--) {
                scItems[i].style.width = "50%";
            }
        }
        
    } else if (widthClient > 1200 && window.location.href.indexOf("success") > -1) {
        if(scItems.length > 0) {
            if(scItems.length === 4) scItems[3].style.display = "";
            if(scItems.length > 3) scItems[2].style.display = "";
            for (var i = scItems.length - 1; i >= 0; i--) {
                scItems[i].style.width = "25%";
            }
        }
        
    }
}
window.onresize = resize;

function scSwipe_passed() {
    var touchsurface = document.getElementById('softcube'),
        startX,
        startY,
        dist,
        threshold = 150,
        allowedTime = 700,
        elapsedTime,
        startTime
    var widthClient = document.getElementById('softcube').clientWidth;
    document.getElementById('softcubenext').addEventListener('touchstart', function (e) {handleswipe(false, true)})
        document.getElementById('softcubeprev').addEventListener('touchstart', function (e) {handleswipe(true, false)})
 
    function handleswipe(isrightswipe, isleftswipe){
        if(window.location.href.indexOf("mango.pl") > -1) {
  
        }
        
        var widthClientBody = document.body.clientWidth;
        var item_width = "";
        if(isMobile.any() && widthClientBody < 479) {
            item_width = parseInt(widthClientBody * 0.8);
        } else if(isMobile.any() && widthClientBody < 640 && widthClientBody >= 479) {
            item_width = parseInt(widthClientBody * 0.4);
        } else if(isMobile.any() && widthClientBody < 960 && widthClientBody >= 640) {
            item_width = parseInt(widthClientBody * 0.26);
        } else if(isMobile.any() && widthClientBody < 1200 && widthClientBody >= 960) {
            item_width = parseInt(widthClientBody * 0.18);
            
        }
        if (isrightswipe) {
            isleftswipe = false;
            _animate_itemSwipe(item_width,isrightswipe, isleftswipe);
        } else if (isleftswipe) {
            isrightswipe = false;
            _animate_itemSwipe(item_width,isrightswipe, isleftswipe);
        }
    }
        
        jQuery('#softcube').on('touchstart ', function(event){
            if (event.type == "touchstart") {
                var touchobj = event.originalEvent.touches[0] || event.originalEvent.changedTouches[0];
                var offsettouchend = (touchobj.pageX - jQuery(event.target).offset().left);
                dist = 0;
                startX = touchobj.pageX;
                startY = touchobj.pageY;
                startTime = new Date().getTime(); 
            }
            event.stopPropagation();
        });

        jQuery('#softcube').on('touchmove', function(event){
            event.stopPropagation();
        });
        jQuery('#softcube').on('touchend ', function(event){
            if (event.type == "touchend") {
                var touchobj = event.originalEvent.touches[0] || event.originalEvent.changedTouches[0];
                var offset = (touchobj.pageX - jQuery(event.target).offset().left);
                dist = touchobj.pageX - startX;
                elapsedTime = new Date().getTime() - startTime;
                var swiperightBol = (elapsedTime <= allowedTime && dist >= threshold && Math.abs(touchobj.pageY - startY) <= 100);
                var swipeleftBol = (elapsedTime <= allowedTime && Math.abs(dist) >= threshold);
            }
            handleswipe(swiperightBol, swipeleftBol);
            event.stopPropagation();
        });
 
};
var timer = setInterval(function() {
    if (document.getElementById('softcube')) {
        clearInterval(timer);
        scSwipe_passed();
    }
},500);

function _animate_itemSwipe (item_width,isrightswipe, isleftswipe) {
    var animate_item = document.getElementsByClassName('animate_item');
    var count_product = document.getElementsByClassName("animate_item").length; 
    var leftprev = 0;
    var prev = document.getElementById('softcubeprev');
    var next = document.getElementById('softcubenext');
    var inner = document.getElementById('softcubeinner');
    var len = document.getElementsByClassName("animate_item")[0].offsetWidth;
    var width = inner.offsetWidth * count_product;
    var widthClient = document.getElementById('softcube').clientWidth;
    inner.style.setProperty("width", width + 'px');
    var left = parseInt(inner.style.left);
    var inner_width = len * count_product - widthClient;

    if(isleftswipe) {
        if (-left < inner_width - len + 1) {
            scroll = item_width;
            if (left > (left - scroll)) {
                var stepsLeft = [];
                var step = (item_width / 7);
                var leftStatr = left;
                for (var i = 0; i < 7; i++) {
                    stepsLeft.push(leftStatr - (item_width / 7)*i)
                }
                var i = 0;
                var timer = setInterval(function() {
                  if (i === 6) {
                    clearInterval(timer);
                    left = left - item_width;
                    scroll--;
                    inner.style.setProperty("left", left + 'px', "important");
                  }
                  else {
                    inner.style.setProperty("left", stepsLeft[i] + 'px', "important");
                    i++;
                  }
                }, 50)
            }
        }
    }
    if(isrightswipe) {
        if (leftprev > left) {
            scroll = -item_width;
            if (-left > (scroll - left)) {
                 var stepsRight= [];
                var step = (item_width / 7);
                var leftStatr = left;
                for (var i = 0; i < 7; i++) {
                    stepsRight.push(leftStatr + (item_width / 7)*i)
                }
                var i = 0;
                var timer = setInterval(function() {
                  if (i === 6) {
                    clearInterval(timer);
                    left = left + item_width;
                    scroll--;
                    inner.style.setProperty("left", left + 'px', "important");
                  }
                  else {
                    inner.style.setProperty("left", stepsRight[i] + 'px', "important");
                    i++;
                  }
                }, 50)
            }
        }
    }
}

function _htmlMainOwl(recommend, recommendText) {
    var htmlBlocks = [];
        var num = new Number(recommend.price);
        var price = num.toFixed(2);
        var numold = new Number(recommend.tags_oldprice);
        var oldprice = numold.toFixed(2);
        var numreduce = new Number(recommend.tags_reduced_price);
        var numclub = new Number(recommend.tags_club5_price);
        var club = numclub.toFixed(2);
        var displaygift = "display:none;";
        var displaydelivery = "display:none;";
        var displayprice = "";
        var displayclub = "display:none;";
        var displayoldprice = "display:none;";
        var displaylabel = "display:none;";
        var item = "";
        var right = "";
        var left = "left: 116px;";
        if(window.location.href.indexOf("onepage/success/") > -1){
            left = "left: 116px;";
        }
        var position = "position: relative;";
        var overflow = "overflow: hidden;";
        var mobilehide = "";
        var height = "/*height: 185px;*/";
        var center = "";
        var reduced_price = numreduce.toFixed(2);
        var tags_rating_show = "display:none";
        var width_rating = "";
        if(recommend.tags_giftrule === "true") {
            displaygift = "display:block;";
        }
        if(recommend.tags_giftdelivery === "true") {
            displaydelivery = "display:block;";
        }

        if(recommend.tags_reduced_price.length > 1) {
            displayoldprice = "display:block;";
            displayprice = "display:none;";
            oldprice = price;
        }
        if(recommend.tags_club5_price.length > 1) {
            displayclub = "display:inline-block;";
            displayprice = "display:block;";
        }
        if(recommend.tags_discount.length > 1) {
            displaylabel = "display:block;";
            displaylabelTop = "top: 0;";
        }
        if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
            displayprice = "display:none;";
        }
        if(recommend.tags_rating.length > 0) {
            tags_rating_show = "display:block;";
            switch(recommend.tags_rating) {
              case '3': 
                width_rating = "width: 60%;"
                break;
              case '3.5': 
                width_rating = "width: 70%;"
                break;
              case '4': 
                width_rating = "width: 80%;"
                break;
              case '4.5':
                width_rating = "width: 90%;"
                break;
              case '5':
                width_rating = "width: 100%;"
                break;
            }
        }

    htmlBlocks.push('<div class="item" style="border: 1px solid #dbdbdb; padding: 15px; position: relative;">'+
    '<div class="li-content">'+
    '<div class="list-image-box">'+
        '<div class="new-label  new-top-right price-discount" style="' + displaylabel + '">'+
            '<span>-' + recommend.tags_discount + '% </span>'+
        '</div>'+
        '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image">'+
        '<img src="' + recommend.imageurl + '" alt="' + recommend.name + '">'+
        '<div class="hover-image">'+
        '</div>'+
        '</a>'+
        '</div>'+
        '<div class="product-info">'+
        '<div class="product-info-inner">'+
        '<a href="' + recommend.url + '" title="' + recommend.name + '" class="widget-product-link">'+
        '<h2 class="product-name js-gtm-data" style="height: 45px;overflow:hidden;">' + recommend.name + '</h2>'+
        '<div class="gift-icon-wrapper" style="height: 28px;">'+
        '<div class="gift-icon" id="" style="text-align: center;' + recommendText.freeGifts + '"><i class="fa fa-gift" aria-hidden="true"></i>'+
            '<span class="copy">' + recommendText.textGift + '</span></div></div>'+
        '<div class="free-delivery-wrapper" style="height: 38px;' + recommendText.freeDeliveris + '">'+
            '<div style="text-align: center;' + displaydelivery + '" class="free-delivery">'+
                '<span class="icon" style="padding-top: 6px;">&nbsp;</span>'+
                '<span class="copy" style="top: -6px;    text-decoration: none;">' + recommendText.textDelivery + '</span>'+
            '</div>'+
        '</div>'+
        '<div class="rating-wrapper" style="height: 36px;text-align:center;">'+
            '<span class="ratings">'+
                '<span class="rating-box" style="' + tags_rating_show + '">'+
                    '<span class="rating" style="' + width_rating + '"></span>'+
                '</span>'+
            '</span>'+
        '</div>'+
        '<div class="price-container" style="height: 42px;">'+   
        '<div class="price-box">'+
            '<span class="regular-price" id="" style="' + displayprice + '">'+
                '<span class="price">' + splitDigital(price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
            '</span>'+
            '<p class="old-price" style="' + displayoldprice + '">'+
                '<span class="price-label">'+recommendText.textOldprice+'&nbsp;</span>'+
                '<span class="price" id="" style="white-space: nowrap;">' + splitDigital(oldprice.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
            '</p><br>'+
            '<p class="special-price" style="' + displayoldprice + '">'+
                '<span class="price-label">'+recommendText.textReducedprice+'&nbsp;</span>'+
                '<span class="price" id="" style="white-space: nowrap;">' + splitDigital(reduced_price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
            '</p>'+
        '</div>'+

'</div>'+
'<div class="club-five" style="text-decoration: none;">'+
                        '<span class="club5-price" style="' + displayclub + ' font-size: 12px;  box-sizing: border-box; margin: 0; padding: 0;  text-align: center; font-family: Arial, sans-serif;">' + splitDigital(club.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '&nbsp; ' + recommendText.textClub + '<span class="icon"></span></span>'+
                    '</div>'+
'</a></div>'+
'<div class="actions"><a title="'+recommendText.textButton+'" class="view-prod" style="' + buttonColor +' " href="' + recommend.url + '">'+recommendText.textButton+'</a>'+
'<ul class="add-to-links">'+
'<li>'+
'<a href="' + recommend.imageurl + '" class="link-compare">' + recommendText.comparison + '</a>'+
'</li></ul></div></div></div></div>');
    return htmlBlocks.join('');
}

function _htmlMainMobileOwl(recommend, recommendText) {
    var htmlBlocks = [];
        var num = new Number(recommend.price);
        var price = num.toFixed(2);
        var numold = new Number(recommend.tags_oldprice);
        var oldprice = numold.toFixed(2);
        var numreduce = new Number(recommend.tags_reduced_price);
        var numclub = new Number(recommend.tags_club5_price);
        var club = numclub.toFixed(2);
        var displaygift = "display:none;";
        var displaydelivery = "display:none;";
        var displayprice = "";
        var displayclub = "display:none;";
        var displayoldprice = "display:none;";
        var displaylabel = "display:none;";
        var item = "";
        var right = "";
        var left = "left: 116px;";
        if(window.location.href.indexOf("onepage/success/") > -1){
            left = "left: 116px;";
        }
        var position = "position: relative;";
        var overflow = "overflow: hidden;";
        var mobilehide = "";
        var height = "/*height: 185px;*/";
        var center = "";
        var reduced_price = numreduce.toFixed(2);
        var tags_rating_show = "display:none";
        var width_rating = "";
        if(recommend.tags_giftrule === "true") {
            displaygift = "display:block;";
        }
        if(recommend.tags_giftdelivery === "true") {
            displaydelivery = "display:block;";
        }

        if(recommend.tags_reduced_price.length > 1) {
            displayoldprice = "display:block;";
            displayprice = "display:none;";
            oldprice = price;
        }
        if(recommend.tags_club5_price.length > 1) {
            displayclub = "display:inline-block;";
            displayprice = "display:block;";
        }
        if(recommend.tags_discount.length > 1) {
            displaylabel = "display:block;";
            displaylabelTop = "top: 0;";
        }
        if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
            displayprice = "display:none;";
        }
        if(recommend.tags_rating.length > 0) {
            tags_rating_show = "display:block;";
            switch(recommend.tags_rating) {
              case '3': 
                width_rating = "width: 60%;"
                break;
              case '3.5': 
                width_rating = "width: 70%;"
                break;
              case '4': 
                width_rating = "width: 80%;"
                break;
              case '4.5':
                width_rating = "width: 90%;"
                break;
              case '5':
                width_rating = "width: 100%;"
                break;
            }
        }

    htmlBlocks.push('<div class="item" style="position: relative;">'+
    '<div class="li-content">'+
        '<div class="list-image-box" style="display: inline-table; width: 100%; position: relative;">'+
            '<div class="new-label  new-top-right price-discount" style="' + displaylabel + '">'+
                '<span>-' + recommend.tags_discount + '% </span>'+
            '</div>'+
            '<div class="hover-state"></div>'+
            '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image">'+
                '<img src="' + recommend.imageurl + '" alt="' + recommend.name + '">'+
                 '<div class="hover-image"></div>'+
            '</a>'+
        '</div>'+
        '<div class="product-info">'+
            '<div class="product-info-inner" style="height: auto;">'+
                '<a href="' + recommend.url + '" title="' + recommend.name + '" class="widget-product-link">'+
                    '<h2 class="product-name js-gtm-data visibleByEE full-visible" style="height: auto;">' + recommend.name + '</h2>'+
                    '<div class="gift-icon-wrapper" style="height: auto;">'+
                        '<div class="gift-icon" id="gift-icon" style="height: auto;' + recommendText.freeGifts + '">'+
                            '<i class="fa fa-gift" aria-hidden="true"></i>'+
                            '<span class="copy">' + recommendText.textGift + '</span>'+
                        '</div>'+
                    '</div>'+
                    '<div class="free-delivery-wrapper" style="height: auto;">'+
                    '</div>'+
                    '<div class="rating-wrapper" style="height: auto;">'+
                        '<span class="ratings">'+
                            '<span class="rating-box" style="' + tags_rating_show + '">'+
                                '<span class="rating" style="' + width_rating + '"></span>'+
                            '</span>'+
                        '</span>'+
                    '</div>'+
                    '<div class="price-container" style="height: auto;">'+
                        '<div class="price-box" style="height: auto;">'+
                            '<span class="regular-price" style="' + displayprice + '">'+
                                '<span class="price-label price-label-before">'+recommendText.textPrice+'&nbsp;</span>'+ 
                                '<span class="price">' + splitDigital(price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span><span class="price-label price-label-after"></span>'+
                            '</span>'+
                            '<p class="old-price" style="' + displayoldprice + '">'+
                                '<span class="price-label">'+recommendText.textOldprice+'</span>'+
                                '<span class="price" id="old-price" style="white-space: nowrap;">' + splitDigital(oldprice.replace(".", ","),recommendText.delimiter)+ '&nbsp;' + recommendText.curency + '</span>'+
                            '</p>'+
                            '<br>'+
                            '<p class="special-price" style="' + displayoldprice + '">'+
                                '<span class="price-label">'+recommendText.textReducedprice+'</span>'+
                                '<span class="price" id="product-price" style="white-space: nowrap;">' + splitDigital(reduced_price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
                            '</p>'+
                        '</div>'+
                    '</div>'+
                    '<div class="club-five" style="height: auto;">'+
                        '<span class="club5-price" style="' + displayclub + ' font-size: 12px;  box-sizing: border-box; margin: 0; padding: 0;  text-align: center; font-family: Arial, sans-serif;">' + splitDigital(club.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '&nbsp;' + recommendText.textClub + '<span class="icon"></span></span>'+
                    '</div>'+
                '</a>'+
            '</div>'+
        '</div>'+
    '</div>'+
'</div>');
    return htmlBlocks.join('');
}


function _htmlCategoryOwl(recommend, recommendText) {
    var htmlBlocks = [];
    var num = new Number(recommend.price);
    var price = num.toFixed(2);
    var numold = new Number(recommend.tags_oldprice);
    var oldprice = numold.toFixed(2);
    var numreduce = new Number(recommend.tags_reduced_price);
    var numclub = new Number(recommend.tags_club5_price);
    var club = numclub.toFixed(2);
    var displaygift = "display:none;";
    var displaydelivery = "display:none;";
    var displayprice = "";
    var displayclub = "display:none;";
    var displayoldprice = "display:none;";
    var displaylabel = "display:none;";
    var item = "";
    var right = "";
    var left = "left: 116px;";
    if(window.location.href.indexOf("onepage/success/") > -1){
        left = "left: 116px;";
    }
    var position = "position: relative;";
    var overflow = "overflow: hidden;";
    var mobilehide = "";
    var height = "/*height: 185px;*/";
    var center = "";
    var reduced_price = numreduce.toFixed(2);
    if(recommend.tags_giftrule === "true") {
        displaygift = "display:block;";
    }
    if(recommend.tags_giftdelivery === "true") {
        displaydelivery = "display:block;";
    }

    if(recommend.tags_reduced_price.length > 1) {
        displayoldprice = "display:block;";
        displayprice = "display:none;";
        oldprice = price;
    }
    if(recommend.tags_club5_price.length > 1) {
        displayclub = "display:inline-block;";
        displayprice = "display:block;";
    }
    if(recommend.tags_discount.length > 1) {
        displaylabel = "display:block;";
        displaylabelTop = "top: 0;";
    }
    if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
        displayprice = "display:none;";
    }

    htmlBlocks.push(
        '<div class="item">'+
            '<div class="product-img" style="height: 101px;">'+
                '<div class="new-label  new-top-right price-discount" style="' + displaylabel + '">'+
                    '<span>-' + recommend.tags_discount + '% </span>'+
                '</div>'+
                '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image">'+
                    '<img id="" src="' + recommend.imageurl + '" alt="' + recommend.name + '">'+
                    '<div class="hover-image"></div>'+
                '</a>'+
            '</div>'+
            '<div class="product-hd" style="height: 57px;">'+
                '<a href="' + recommend.url + '" class="header-product-link">'+
                    '<p class="js-gtm-data visibleByEE full-visible" >' + recommend.name + '</p>'+
                '</a>'+
            '</div>'+
        '</div>'
    );
    return htmlBlocks.join('');
}
function _htmlProductList(recommend, recommendText) {
    var htmlBlocks = [];
    var num = new Number(recommend.price);
    var price = num.toFixed(2);
    var numold = new Number(recommend.tags_oldprice);
    var oldprice = numold.toFixed(2);
    var numreduce = new Number(recommend.tags_reduced_price);
    var numclub = new Number(recommend.tags_club5_price);
    var club = numclub.toFixed(2);
    var displaygift = "display:none;";
    var displaydelivery = "display:none;";
    var displayprice = "";
    var displayclub = "display:none;";
    var displayoldprice = "display:none;";
    var displaylabel = "display:none;";
    var item = "";
    var right = "";
    var left = "left: 116px;";
    if(window.location.href.indexOf("onepage/success/") > -1){
        left = "left: 116px;";
    }
    var position = "position: relative;";
    var overflow = "overflow: hidden;";
    var mobilehide = "";
    var height = "/*height: 185px;*/";
    var center = "";
    var reduced_price = numreduce.toFixed(2);
    if(recommend.tags_giftrule === "true") {
        displaygift = "display:block;";
    }
    if(recommend.tags_giftdelivery === "true") {
        displaydelivery = "display:block;";
    }

    if(recommend.tags_reduced_price.length > 1) {
        displayoldprice = "display:block;";
        displayprice = "display:none;";
        //oldprice = price;
    }
    if(recommend.tags_club5_price.length > 1) {
        displayclub = "display:inline-block;";
        displayprice = "display:block;";
    }
    if(recommend.tags_discount.length > 1) {
        displaylabel = "display:block;";
        displaylabelTop = "top: 0;";
    }
    if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
        displayprice = "display:none;";
    }

    htmlBlocks.push(
        '<div class="item none">'+
                '<div class="li-content">'+
                    '<div class="list-image-box" style="position: relative;">'+
                        '<div class="new-label  new-top-right price-discount" style="position: absolute; top: 0;' + displaylabel + '">'+
                            '<span>-' + recommend.tags_discount + '% </span>'+
                        '</div>'+
                        '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image">'+
                            '<img src="' + recommend.imageurl + '" alt="' + recommend.name + '">'+
                        '</a>'+
                    '</div>'+
                    '<div class="product-info">'+
                        '<div class="product-info-inner" style="height: auto;">'+
                            '<a href="' + recommend.url + '" title="' + recommend.name + '" class="widget-product-link">'+
                                '<h2 class="product-name js-gtm-data visibleByEE full-visible" style="height: auto;">' + recommend.name + '</h2>'+
                                '<div class="gift-icon-wrapper" style="height: 28px;' + recommendText.freeGifts + '">'+
                                '<div style="' + displaygift + ' padding: 5px 0; color: #41aeef; font-family: \'Roboto Condensed\', arial, sans-serif; text-transform: uppercase; font-size: 11px; font-weight: bold;" class="gift-icon" id="">'+
                                '<i class="fa fa-gift" aria-hidden="true" style="line-height: 12px;"></i>'+
                                '<span class="copy">' + recommendText.textGift + '</span>'+
                                '</div>'+
                                '</div>'+
                                '<div class="free-delivery-wrapper" style="height: 38px;' + recommendText.freeDeliveris + '">'+
                                '<div style="' + displaydelivery + '" class="free-delivery">'+
                                '<span class="icon" style="padding-top: 6px;">&nbsp;</span>'+
                                '<span class="copy" style="top: -6px;    text-decoration: none;  font-size: 11px;">' + recommendText.textDelivery + '</span>'+
                                '</div>'+
                                '</div>'+
                                '<div class="rating-wrapper" style="height: auto;"></div>'+
                                '<div class="price-container" style="height: auto;">'+
                                    '<div class="price-box" style="height: auto;">'+
                                        '<p class="old-price" style="' + displayoldprice + '">'+
                                            '<span class="price-label">'+recommendText.textOldprice+'&nbsp;</span>'+
                                            '<span class="price">' + splitDigital(oldprice.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
                                        '</p>'+
                                        '<br>'+
                                        '<p class="special-price" style="' + displayoldprice + '">'+
                                            '<span class="price-label" >'+recommendText.textReducedprice+'&nbsp;</span>'+
                                            '<span class="price" >' + splitDigital(reduced_price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
                                        '</p>'+
                                        '<span class="regular-price" style="' + displayprice + '">'+
                                            '<span class="price">' + splitDigital(price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
                                        '</span>'+
                                    '</div>'+
                                '</div>'+
                                '<div class="club-five" style="height: auto;">'+
                                    '<span class="club5-price" style="' + displayclub + ' font-size: 12px;  box-sizing: border-box; margin: 0; padding: 0;  text-align: center; font-family: Arial, sans-serif;">' + splitDigital(club.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '&nbsp; ' + recommendText.textClub + '<span class="icon"></span></span>'+
                                '</div>'+
                            '</a>'+
                        '</div>'+
                    '</div>'+
                '</div>'+
            '</div>'
    );
    return htmlBlocks.join('');
}

function _htmlProductOwl(recommend, recommendText) {
    var htmlBlocks = [];
        var num = new Number(recommend.price);
        var price = num.toFixed(2);
        var numold = new Number(recommend.tags_oldprice);
        var oldprice = numold.toFixed(2);
        var numreduce = new Number(recommend.tags_reduced_price);
        var numclub = new Number(recommend.tags_club5_price);
        var club = numclub.toFixed(2);
        var displaygift = "display:none;";
        var displaydelivery = "display:none;";
        var displayprice = "";
        var displayclub = "display:none;";
        var displayoldprice = "display:none;";
        var displaylabel = "display:none;";
        var item = "";
        var right = "";
        var left = "left: 116px;";
        if(window.location.href.indexOf("onepage/success/") > -1){
            left = "left: 116px;";
        }
        var position = "position: relative;";
        var overflow = "overflow: hidden;";
        var mobilehide = "";
        var height = "/*height: 185px;*/";
        var center = "";
        var reduced_price = numreduce.toFixed(2);
        var tags_rating_show = "display:none";
        var width_rating = "";
        if(recommend.tags_giftrule === "true") {
            displaygift = "display:block;";
        }
        if(recommend.tags_giftdelivery === "true") {
            displaydelivery = "display:block;";
        }

        if(recommend.tags_reduced_price.length > 1) {
            displayoldprice = "display:block;";
            displayprice = "display:none;";
            oldprice = price;
        }
        if(recommend.tags_club5_price.length > 1) {
            displayclub = "display:inline-block;";
            displayprice = "display:block;";
        }
        if(recommend.tags_discount.length > 1) {
            displaylabel = "display:block;";
            displaylabelTop = "top: 0;";
        }
        if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
            displayprice = "display:none;";
        }
        if(recommend.tags_rating.length > 0) {
            tags_rating_show = "display:block;";
            switch(recommend.tags_rating) {
              case '3': 
                width_rating = "width: 60%;"
                break;
              case '3.5': 
                width_rating = "width: 70%;"
                break;
              case '4': 
                width_rating = "width: 80%;"
                break;
              case '4.5':
                width_rating = "width: 90%;"
                break;
              case '5':
                width_rating = "width: 100%;"
                break;
            }
        }

    htmlBlocks.push('<div class="item" style="border: 1px solid #dbdbdb; padding: 15px; position: relative;background: white;">'+
    '<div class="li-content">'+
    '<div class="list-image-box">'+
        '<div class="new-label  new-top-right price-discount" style="' + displaylabel + '">'+
            '<span>-' + recommend.tags_discount + '% </span>'+
        '</div>'+
        '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image">'+
        '<img src="' + recommend.imageurl + '" alt="' + recommend.name + '">'+
        '<div class="hover-image">'+
        '</div>'+
        '</a>'+
        '</div>'+
        '<div class="product-info">'+
        '<div class="product-info-inner">'+
        '<a href="' + recommend.url + '" title="' + recommend.name + '" class="widget-product-link">'+
        '<h2 class="product-name js-gtm-data" style="height: 45px;overflow:hidden;">' + recommend.name + '</h2>'+
        '<div class="gift-icon-wrapper" style="height: 28px;">'+
        '<div class="gift-icon" id="" style="text-align: center;' + recommendText.freeGifts + '"><i class="fa fa-gift" aria-hidden="true"></i>'+
            '<span class="copy">' + recommendText.textGift + '</span></div></div>'+
        '<div class="free-delivery-wrapper" style="height: 38px;' + recommendText.freeDeliveris + '">'+
            '<div style="text-align: center;' + displaydelivery + '" class="free-delivery">'+
                '<span class="icon" style="padding-top: 6px;">&nbsp;</span>'+
                '<span class="copy" style="top: -6px;    text-decoration: none;">' + recommendText.textDelivery + '</span>'+
            '</div>'+
        '</div>'+
        '<div class="rating-wrapper" style="height: 36px;text-align:center;">'+
            '<span class="ratings">'+
                '<span class="rating-box" style="' + tags_rating_show + '">'+
                    '<span class="rating" style="' + width_rating + '"></span>'+
                '</span>'+
            '</span>'+
        '</div>'+
        '<div class="price-container" style="height: 42px;">'+   
        '<div class="price-box">'+
            '<span class="regular-price" id="" style="' + displayprice + '">'+
                '<span class="price">' + splitDigital(price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
            '</span>'+
            '<p class="old-price" style="' + displayoldprice + '">'+
                '<span class="price-label">'+recommendText.textOldprice+'&nbsp;</span>'+
                '<span class="price" id="" style="white-space: nowrap;">' + splitDigital(oldprice.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
            '</p><br>'+
            '<p class="special-price" style="' + displayoldprice + '">'+
                '<span class="price-label">'+recommendText.textReducedprice+'&nbsp;</span>'+
                '<span class="price" id="" style="white-space: nowrap;">' + splitDigital(reduced_price.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '</span>'+
            '</p>'+
        '</div>'+

'</div>'+
'<div class="club-five" style="text-decoration: none;">'+
                        '<span class="club5-price" style="' + displayclub + ' font-size: 12px;  box-sizing: border-box; margin: 0; padding: 0;  text-align: center; font-family: Arial, sans-serif;">' + splitDigital(club.replace(".", ","),recommendText.delimiter) + '&nbsp;' + recommendText.curency + '&nbsp; ' + recommendText.textClub + '<span class="icon"></span></span>'+
                    '</div>'+
'</a></div>'+
'<div class="actions"><a title="'+recommendText.textButton+'" class="view-prod" style="' + buttonColor +' " href="' + recommend.url + '">'+recommendText.textButton+'</a>'+
'<ul class="add-to-links">'+
'<li>'+
'<a href="' + recommend.imageurl + '" class="link-compare">' + recommendText.comparison + '</a>'+
'</li></ul></div></div></div></div>');
    return htmlBlocks.join('');
}

function _htmlCategoryOwlProduct(recommend, recommendText) {
    var htmlBlocks = [];
    var num = new Number(recommend.price);
    var price = num.toFixed(2);
    var numold = new Number(recommend.tags_oldprice);
    var oldprice = numold.toFixed(2);
    var numreduce = new Number(recommend.tags_reduced_price);
    var numclub = new Number(recommend.tags_club5_price);
    var club = numclub.toFixed(2);
    var displaygift = "display:none;";
    var displaydelivery = "display:none;";
    var displayprice = "";
    var displayclub = "display:none;";
    var displayoldprice = "display:none;";
    var displaylabel = "display:none;";
    var item = "";
    var right = "";
    var left = "left: 116px;";
    if(window.location.href.indexOf("onepage/success/") > -1){
        left = "left: 116px;";
    }
    var position = "position: relative;";
    var overflow = "overflow: hidden;";
    var mobilehide = "";
    var height = "/*height: 185px;*/";
    var center = "";
    var reduced_price = numreduce.toFixed(2);
    if(recommend.tags_giftrule === "true") {
        displaygift = "display:block;";
    }
    if(recommend.tags_giftdelivery === "true") {
        displaydelivery = "display:block;";
    }

    if(recommend.tags_reduced_price.length > 1) {
        displayoldprice = "display:block;";
        displayprice = "display:none;";
        oldprice = price;
    }
    if(recommend.tags_club5_price.length > 1) {
        displayclub = "display:inline-block;";
        displayprice = "display:block;";
    }
    if(recommend.tags_discount.length > 1) {
        displaylabel = "display:block;";
        displaylabelTop = "top: 0;";
    }
    if(recommend.tags_club5_price.length > 1 && recommend.tags_reduced_price.length > 1) {
        displayprice = "display:none;";
    }

    htmlBlocks.push(
        '<div class="item" style="background: white;">'+
            '<div class="product-img" style="height: 121px;">'+
                '<div class="new-label  new-top-right price-discount" style="' + displaylabel + '">'+
                    '<span>-' + recommend.tags_discount + '% </span>'+
                '</div>'+
                '<a href="' + recommend.url + '" title="' + recommend.name + '" class="product-image" style="    border-bottom: 1px solid #ccc;">'+
                    '<img id="" src="' + recommend.imageurl + '" alt="' + recommend.name + '">'+
                    '<div class="hover-image"></div>'+
                '</a>'+
            '</div>'+
            '<div class="product-hd" style="height: 57px;overflow: hidden;">'+
                '<a href="' + recommend.url + '" class="header-product-link">'+
                    '<h2 class="jproduct-name js-gtm-data" style="font-size: 1em; padding-top: 17px;" >' + recommend.name + '</h2>'+
                '</a>'+
            '</div>'+
        '</div>'
    );
    return htmlBlocks.join('');
}

if(getCookie("crsssptst") === "0" && window.location.href.indexOf("checkout/cart/") > -1) {
    var timerScart = setInterval(function() {
        var clickEvent = (function() {
        if ('ontouchstart' in document.documentElement === true)
            return 'touchstart';
          else
            return 'click';
        })();
        if (document.querySelectorAll('.owl-item').length > 0) {
            clearInterval(timerScart);
            document.querySelectorAll(".view-prod").forEach(function(item){
                item.addEventListener(clickEvent, function(){
                    var root = item.parentNode.offsetParent;
                    var prodKey = root.querySelector(".product-name").getAttribute("data-cpr");
                    var expr = window.location.hostname.replace("www.", "");
                    var blockId = "";
                    switch (expr) {
                        case 'dormeo.me':
                            blockId = "16060";
                            break;
                        case 'top-shop.me':
                            blockId = "16056";
                            break;
                        case 'delimano.me':
                            blockId = "15993";
                            break;
                        case 'walkmaxx.me':
                            blockId = "15994";
                            break;
                        case 'wellneo.me':
                            blockId = "16058";
                            break;
                        case 'delimano.lv':
                            blockId = "16071";
                            break;
                        case 'dormeo.lv':
                            blockId = "16012";
                            break;
                        case 'wellneo.lv':
                            blockId = "16005";
                            break;
                        case 'top-shop.lv':
                            blockId = "16043";
                            break;
                        case 'delimano.hu':
                            blockId = "16030";
                            break;
                        case 'dormeo.hu':
                            blockId = "16036";
                            break;
                        case 'wellneo.hu':
                            blockId = "16077";
                            break;
                        case 'topshop.hu':
                            blockId = "16041";
                            break;
                        case 'walkmaxx.hu':
                            blockId = "15996";
                            break;
                        case 'dormeo.net':
                            blockId = "16065";
                            break;
                        case 'delimano.si':
                            blockId = "15998";
                            break;
                        case 'wellneo.si':
                            blockId = "16023";
                            break;
                        case 'topshop.si':
                            blockId = "16020";
                            break;
                        case 'walkmaxx.si':
                            blockId = "16069";
                            break;
                        case 'delimano.cz':
                            blockId = "16034";
                            break;
                        case 'dormeo.cz':
                            blockId = "16010";
                            break;
                        case 'wellneo.cz':
                            blockId = "16039";
                            break;
                        case 'topshop.cz':
                            blockId = "16039";
                            break;
                        case 'walkmaxx.cz':
                            blockId = "16007";
                            break;
                        case 'delimano.hr':
                            blockId = "16070";
                            break;
                        case 'dormeo.com.hr':
                            blockId = "16015";
                            break;
                        case 'topshop.com.hr':
                            blockId = "16040";
                            break;
                        case 'walkmaxx.hr':
                            blockId = "16050";
                            break;
                        case 'topshop.pl':
                            blockId = "16025";
                            break;
                        case 'dormeo.pl':
                            blockId = "16061";
                            break;
                        case 'dormeo.pl':
                            blockId = "16055";
                            break;
                        case 'mango.pl':
                            blockId = "16138";
                            break;
                    }
                    
                    _sc.sendEvent('ProductPage', {
                        'ProductPage': {
                            'productKey': prodKey
                        }
                    });
                })
            })
        }
    },500);
    setTimeout(function() { clearInterval(timerScart) }, 3000);
}

function setABTest(name) {
    var cookie = getCookie(name);
    if (cookie) {
        return cookie;
    } else {
        var idUser = 'group' + (Math.floor(Math.random() * (2 - 1 + 1)) + 1);
        setCookie(name, idUser, 365);
        return idUser;
    }
}
function setCookie(name, value, days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "") + expires + "; path=/";
}